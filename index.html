<!DOCTYPE html>
<html lang="en">
<head>
  <title>Fish Movement</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
  <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
  
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/6.1.5/css/bootstrap-slider.css" rel="stylesheet">
  <script type='text/javascript' src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/6.1.5/bootstrap-slider.js"></script>
   
  <link rel="stylesheet" href="css/ice.css">
  <link rel="stylesheet" href="css/movement.css">

</head>


<body>

    <!-- Navigation bar -->
    <nav class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span> 
          </button>
          <a class="navbar-brand" href="#">Visualising movements</a>
        </div>
        <div class="collapse navbar-collapse" id="myNavbar">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="#">WHO</a></li>
            <li><a href="#">WHAT</a></li>
            <li><a href="#">WHERE</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Page Content -->
    <div class="container-fluid">

        <!-- Page Header -->
        <div class="row">
          
            <div class="col-lg-7">
                <h3 class="page-header">Brook trout in a small stream in western MA, USA
                    <small></small>
                </h3>
            </div>

            <div class="col-lg-5">
              <button type="button" class="btn btn-sm dropdown-toggle" data-toggle="dropdown">
              River <span class="caret"></span></button>
              <ul class="dropdown-menu" role="menu" id="selectedRiverDD">
                <li><a href="#">WB</a></li>
                <li><a href="#">OL</a></li>
                <li><a href="#">OS</a></li>
                <li><a href="#">IL</a></li>
              </ul>
         
              <div class="btn-group btn-group-sm">
                <button type="button" class="btn btn-default">Unselect all</button>
                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                  Show dots <span class="caret"></span></button>
                  <ul class="dropdown-menu" role="menu">
                    <li><a href="#">All</a></li>
                    <li><a href="#">Selected</a></li>
                  </ul>
              </div>
     
              <div class="btn-group btn-group-sm">
                <button type="button" class="btn btn-default">No Bars</button>
                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                  Bars <span class="caret"></span></button>
                  <ul class="dropdown-menu" role="menu">
                    <li><a href="#">Count</a></li>
                    <li><a href="#">Biomass</a></li>
                  </ul>
              </div>
              
            </div>
        </div>
    
        <!-- /.row -->

        <!-- Projects Row -->
        <div class="row">
            <div class="col-md-6" id="g1">
                <a href="#">
                    <img class="img-responsive" src="http://placehold.it/700x400" alt="">
                </a>
                <h4>
                    <a href="#">Absolute position</a>
                </h4>
            </div>
            <div class="col-md-6" id="g2">
                <a href="#">
                    <img class="img-responsive" src="http://placehold.it/700x400" alt="">
                </a>
                <h4>
                    <a href="#">Movement distance</a>
                </h4>
            </div>
        </div>
        <!-- /.row -->

        <hr>

        <!-- Slider section -->
        <div class="row">
            <div class="col-lg-11">
                <div class="sliderSection">

                  <input id="sampleSlider" data-slider-width="1000px" />

                </div>
            </div>
            <div class="col-lg-1">

                <div id="yearLabel"></div>
                <div id="seasonLabel"></div>

            </div>  
        </div>
        <!-- /.slider -->

        <hr>

        <!-- Info section -->
        <div class="row">
            <div class="col-lg-12">
                <div class="infoSection">
                    
                        <p> Dots are individual fish, with radius proportional to body length. Move the slider to advance seasonal samples. Recaptured fish will change y-axis position if they were observed to move and change x-axis poition based on body growth. Newly tagged fish on the sample will initially appear as green and fish that are never seen again will turn red and disappear.  </p>
  <p>Select individual fish by clicking on a dot. Viewing just the selected points using the radio button is under construction.</p>
  
  <p> Bars on the sides of the graphs sum up the count or biomass (depending on which radio button is selected) for each section (left) or distance moved (right).</p>
                    
                </div>
            </div>
        </div>
        <!-- /.row -->

        <hr>

        <!-- Footer -->
        <footer>
            <div class="row">
                <div class="col-lg-12">
                    <p>Data from USGS Conte Lab <a href="http://www.lsc.usgs.gov/?q=cafb-population-dynamics-personnel">Ecology Section</a></p>
                </div>
            </div>
            <!-- /.row -->
        </footer>

    </div>
    <!-- /.container -->

    <script type='text/javascript' src="js/functions.js"></script>
    <script type='text/javascript' src="js/globalVariables.js"></script>    
    
    <script>
       
       
       
       
       // get data and filter based on selections
       d3.csv("coreDataOut.csv", type,  function (allData){
       
         yearSet = sortUnique(allData.map(function(d) { return d.year; }));
         console.log(yearSet);
         sampSet = sortUnique(allData.map(function(d) { return d.sample; }));
         console.log(sampSet);

         addSlider(sampSet);
   
         selectedRiver = "WB";   //set default
         currentSample = d3.min(sampSet);
         
         getDataNewRiver(allData,currentSample,selectedRiver);
         
         sampSlider.on("slideStop", function(d) {
           console.log(sampleSlider.value);
           currentSample = sampleSlider.value;
           getDataNewSample(allData,currentSample,selectedRiver);
         });
         

         
         
         

         
         
         
         
         
       });
       
       
        
    </script>



</body>
</html>